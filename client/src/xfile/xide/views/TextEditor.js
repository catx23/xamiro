//>>built
define("xide/views/TextEditor","dojo/_base/declare dojo/_base/lang dijit/_Widget dijit/layout/_LayoutWidget dojo/dom-construct dojo/dom-style dojo/has xide/types xide/factory".split(" "),function(e,g,h,k,l,d,n,p,q){return e("xide.views.TextEditor",[h],{_aceConfig:null,_loadedModes:{},focus:function(){!1!==this.autoFocus&&this.editor&&(this.editor.resize(),this.editor.renderer.updateFull(),this.editor.focus())},addAutoCompleter:function(a){this.getEditor();ace.require("ace/ext/language_tools").addCompleter({getCompletions:function(b,
c,d,m,f){0===m.length?f(null,[]):f(null,a.map(function(a){return{name:a.word,value:a.word,meta:"optional text"}}))}})},onEditorReady:function(){this.getEditor().commands.addCommands([{name:"gotoline",bindKey:{win:"Ctrl-L",mac:"Command-L"},exec:function(a,b){if("object"==typeof b){var c=this.name+" "+a.getCursorPosition().row;a.cmdLine.setValue(c,1);a.cmdLine.focus()}else b=parseInt(b,10),isNaN(b)||a.gotoLine(b)},readOnly:!0},{name:"snippet",bindKey:{win:"Alt-C",mac:"Command-Alt-C"},exec:function(a,
b){if("object"==typeof b)a.cmdLine.setValue("snippet ",1),a.cmdLine.focus();else{var c=snippetManager.getSnippetByName(b,a);c&&snippetManager.insertSnippet(a,c.content)}},readOnly:!0},{name:"increaseFontSize",bindKey:"Ctrl-+",exec:function(a){var b=parseInt(a.getFontSize(),10)||12;a.setFontSize(b+1)}},{name:"decreaseFontSize",bindKey:"Ctrl+-",exec:function(a){var b=parseInt(a.getFontSize(),10)||12;a.setFontSize(Math.max(b-1||1))}},{name:"resetFontSize",bindKey:"Ctrl+0",exec:function(a){a.setFontSize(12)}}]);
this.focus()},onDidChange:function(){},setOptions:function(a){a=this.getEditor();var b=this;this.editor.session.setUseWorker(!0);a.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0});a.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())};a.on("change",function(){b.onDidChange(arguments)});this.onEditorReady()},getEditor:function(){return this.editor},buildRendering:function(){this.inherited("buildRendering",arguments);var a=l.create("div");d.set(a,{padding:"0",
margin:"0",className:"editor-ace ace_editor ace-codebox-dark ace_dark"});this.getEditor();var b=ace.require("ace/config");this._aceConfig=b;b.init();ace.require("ace/ext/language_tools");this.editor=ace.edit(a);this.editorSession=this.editor.getSession();this.domNode=a},set:function(a,b){var c=this;if("value"==a)this.editorSession.setValue(b);else if("theme"==a)"string"==typeof b&&(b="ace/theme/"+b),this.editor.setTheme(b);else if("mode"==a)try{ace.require(["ace/mode/"+b],function(a){a&&a.Mode&&c.editorSession.setMode(new a.Mode)})}catch(e){console.error("ace mode failed : "+
b)}else"readOnly"==a?this.editor.setReadOnly(b):"tabSize"==a?this.editorSession.setTabSize(b):"softTabs"==a?this.editorSession.setUseSoftTabs(b):"wordWrap"==a?this.editorSession.setUseWrapMode(b):"printMargin"==a?this.editor.renderer.setPrintMarginColumn(b):"showPrintMargin"==a?this.editor.setShowPrintMargin(b):"highlightActiveLine"==a?this.editor.setHighlightActiveLine(b):"fontSize"==a?d.set(this.domNode,a,b):"showGutter"==a&&this.editor.renderer.setShowGutter(b);return this.inherited("set",arguments)},
get:function(a){return"value"==a?this.editorSession.getValue():this.inherited("get",arguments)},startup:function(){},resize:function(a){a&&k.prototype.resize.apply(this,arguments);var b=this;this._resizer=setTimeout(g.hitch(b,function(){delete b._resizer;b.editor.resize()}),10)},layout:function(){this._layoutMode=!0},destroy:function(){this._resizer&&(clearTimeout(this._resizer),delete this._resizer);return this.inherited("destroy",arguments)}})});
//# sourceMappingURL=TextEditor.js.map