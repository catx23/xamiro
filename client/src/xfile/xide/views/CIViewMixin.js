//>>built
define("xide/views/CIViewMixin","dojo/_base/declare dojo/Stateful xide/utils xide/factory xide/layout/TabContainer xide/layout/ContentPane dojo/store/Memory".split(" "),function(h,k,f,l,m,n,p){return h("xide.views.CIViewMixin",k,{data:null,widgets:null,delegate:null,helpNodes:null,store:null,groups:null,groupContainer:null,cssClass:"CIView",options:null,tabContainer:null,viewStyle:"",tabs:null,autoSelectLast:!0,createGroupContainer:function(){if(this.tabContainer)return this.tabContainer;var a=f.addWidget(m,
{tabPosition:"top",style:""},null,this.containerNode,!0);return this.tabContainer=a},getGroupContainer:function(){return this.groupContainer?this.groupContainer:this.groupContainer=this.createGroupContainer()},createGroupView:function(a,b){return f.addWidget(n,{delegate:this,title:b,closable:!1,style:this.viewStyle},this,a,!0)},attachWidgets:function(a,b){this.helpNodes=[];if(b=b||this.domNode)for(var d=0;d<a.length;d++){var c=a[d];c.delegate=this.owner||this;b.appendChild(c.domNode);c.startup()}else console.error("have no parent dstNode!")},
empty:function(){if(this.helpNodes)for(var a=0;a<this.helpNodes.length;a++){var b=this.helpNodes[a];dojo.destroy(b)}if(this.widgets)for(a=0;a<this.widgets.length;a++)b=this.widgets[a],b.destroyRecursive(),dojo.destroy(b)},sortGroups:function(a,b){return a=a.sort(function(a,c){return a.name&&c.name&&null!=b[a.name]&&null!=b[c.name]?b[c.name]-b[a.name]:100})},toArray:function(a){var b=[],d;for(d in a)b.push({name:d,value:a[d]});return b},renderGroups:function(a){var b=this.getGroupContainer(),d=null;
a=this.toArray(a);this.options&&this.options.groupOrder&&(a=this.sortGroups(a,this.options.groupOrder));this.tabs||(this.tabs=[]);for(var c=0;c<a.length;c++)try{var e=this.createGroupView(b,a[c].name);this.tabs.push(e);var g=l.createWidgetsFromArray(a[c].value,this,null,!1);this.attachWidgets(g,e.containerNode);d=e}catch(f){console.error("ciview::renderGroups failed "+f)}b.resize();this.autoSelectLast&&b.selectChild(d)},getCIS:function(){return this.data},initWithCIS:function(a){try{this.empty();
a=f.flattenCIS(a);var b=new p({data:a});this.data=a;var d=null,c=b.query({group:/\S+/,visible:!0});if(0<c.length){var d={},e;for(e in c)if(null==d[c[e].group]){var g=b.query({group:c[e].group});0<g.length&&(d[c[e].group]=g)}}var h=Object.keys(d).length;null!=d&&1<h?this.renderGroups(d):(this.widgets=l.createWidgetsFromArray(a,this,null,!1))&&this.attachWidgets(this.widgets)}catch(k){console.error("ciview failed : "+k)}}})});
//# sourceMappingURL=CIViewMixin.js.map