//>>built
define("xide/views/ConsoleView","dojo/_base/declare dojo/_base/lang dojo/dom-geometry dojo/dom-style xide/utils xide/types xide/layout/ContentPane xide/views/Console xfile/widgets/ProgressItem".split(" "),function(h,d,e,k,f,l,g,m,n){return h("xide.views.ConsoleView",[g],{delegate:null,value:null,editorNode:null,cmdNode:null,console:null,type:null,logView:null,logPane:null,progressItem:null,cssClass:"mainView XShellView",showProgress:!0,showLastInput:!1,createLogItem:function(a,b){var c=new n({terminatorItem:a,
message:a,autoDestroy:!0},dojo.doc.createElement("div"));b.appendChild(c.domNode);c.startup();b.appendChild(dojo.create("div",{className:"logEntry",innerHTML:""}));var d=this;setTimeout(function(){d._scrollToEnd()},200);return c},onEnter:function(a){this.showProgress&&(this.progressItem=this.createLogItem(a,this.getLoggingContainer()));this.showLastInput&&this.getLoggingContainer().appendChild(dojo.create("span",{innerHTML:"# "+a,className:"ui-state-default"}));if(this.delegate.onConsoleEnter)this.delegate.onConsoleEnter({view:this,
console:this.console},a)},onButton:function(){var a=this.getLoggingContainer();a&&dojo.empty(a)},getLoggingContainer:function(){return this.logView.containerNode},log:function(a){f.destroyWidget(this.progressItem);var b="";if(d.isString(a))b+=a.replace(/\n/g,"\x3cbr/\x3e");else if(d.isObject(a)||d.isArray(a))b+=JSON.stringify(a,null,!0);a=this.getLoggingContainer();a.appendChild(dojo.create("span",{innerHTML:"# "+this.console.getPrev()+" ",className:"ui-state-default"}));for(var b=b.split("\x3cbr/\x3e"),
c=0;c<b.length;c++)a.appendChild(dojo.create("div",{className:"logEntry ui-widget-content",innerHTML:b[c]+""}));a.appendChild(dojo.create("hr",{}));var e=this;setTimeout(function(){e._scrollToEnd()},200)},_fixHeight:function(){if(this.console){var a=e.getMarginBox(this.console.domNode),b=e.getMarginBox(this.domNode);k.set(this.logView.domNode,{height:b.h-a.h-22+"px",width:b.w+"px"})}},resize:function(){this.domNode&&(this.inherited(arguments),this._fixHeight())},_scrollToEnd:function(){dojox.fx.smoothScroll({node:dojo.query(".logPane :last-child")[0],
win:this.logView.domNode}).play()},onServerResponse:function(a){this.log(a);this._fixHeight();this._scrollToEnd()},createWidgets:function(){this.logView=f.addWidget(g,{style:"width:inherit;"},this,this.containerNode,!0,"logPane");this.console=new m({delegate:this,type:this.type,owner:this,className:"consoleWidget ui-state-default"},dojo.doc.createElement("div"));dojo.place(this.console.domNode,this.containerNode,"last");this.console.startup();this._fixHeight()},getValue:function(){return this.editBox.get("value")},
startup:function(){this.inherited(arguments);try{this.createWidgets(),this.subscribe(l.EVENTS.RESIZE,this.resize)}catch(a){debugger}}})});
//# sourceMappingURL=ConsoleView.js.map